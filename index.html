<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>MarketBot</title>
<style>
body{margin:0;font-family:system-ui;background:#0f172a;color:#e5e7eb}
header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:#020617;box-shadow:0 2px 8px rgba(0,0,0,.4)}
.logo{font-weight:700}
.menu{cursor:pointer}
.sidebar{position:fixed;top:0;left:-260px;width:260px;height:100%;background:#020617;padding:20px;transition:.3s}
.sidebar.active{left:0}
.sidebar a{display:block;color:#e5e7eb;text-decoration:none;margin:14px 0}
.container{max-width:900px;margin:auto;padding:20px}
.banner{width:100%;border-radius:14px;margin-bottom:20px}
.chat{background:#020617;border-radius:14px;padding:12px;height:420px;overflow-y:auto}
.msg{margin:10px 0;padding:10px 12px;border-radius:12px;max-width:80%}
.user{background:#2563eb;margin-left:auto}
.bot{background:#111827}
.inputbar{display:flex;margin-top:12px}
input{flex:1;padding:12px;border:none;border-radius:12px 0 0 12px;outline:none}
button{padding:12px 18px;border:none;background:#2563eb;color:white;border-radius:0 12px 12px 0}
footer{margin-top:30px;padding:18px;text-align:center;font-size:12px;color:#9ca3af}
.ad{position:fixed;bottom:-260px;left:0;width:100%;background:#020617;padding:20px;box-shadow:0 -5px 20px rgba(0,0,0,.6);transition:.4s}
.ad.show{bottom:0}
.ad .close{position:absolute;right:12px;top:10px;cursor:pointer;font-size:18px}
</style>
</head>
<body>
<header>
<div class="logo">MarketBot</div>
<div class="menu" onclick="toggleMenu()">☰</div>
</header>

<div class="sidebar" id="sidebar">
<h3>Menu</h3>
<a href="#" onclick="showFollow()">Follow Developer</a>
<div id="follow" style="display:none;color:#38bdf8">Instagram: @_fayizeeyy</div>
</div>

<div class="container">
<img src="assets/banner.jpg" class="banner" />
<div class="chat" id="chat"></div>
<div class="inputbar">
<input id="input" placeholder="Ask market updates..." />
<button onclick="send()">Send</button>
</div>
</div>

<div class="ad" id="ad">
<div class="close" onclick="closeAd()">✕</div>
<h3>Sponsored</h3>
<p>Upgrade to premium signals coming soon...</p>
</div>

<footer>
Trade at your own risk. The developer is not responsible for any financial loss.
</footer>

<script>
const chat=document.getElementById('chat');
function add(text,type){
 const div=document.createElement('div');
 div.className='msg '+type;
 div.innerText=text;
 chat.appendChild(div);
 chat.scrollTop=chat.scrollHeight;
}

function marketStatus(){
 const now=new Date();
 const hour=now.getHours();
 if(hour>=9 && hour<15) return 'Market is OPEN';
 return 'Market is CLOSED';
}

async function fetchPrice(symbol){
 try{
  const url=`https://api.allorigins.win/raw?url=https://query1.finance.yahoo.com/v7/finance/quote?symbols=${symbol}.NS`;
  const res=await fetch(url);
  const data=await res.json();
  const q=data.quoteResponse.result[0];
  if(!q) return 'Stock not found';
  return `${q.shortName} : ₹${q.regularMarketPrice} (${q.regularMarketChangePercent.toFixed(2)}%)`;
 }catch(e){
  return 'Unable to fetch live price now';
 }
}

async function botReply(q){
 q=q.toLowerCase();
 if(q.includes('open')||q.includes('close')) return marketStatus();
 if(q.startsWith('price ')){
  const symbol=q.split('price ')[1].trim().toUpperCase();
  return await fetchPrice(symbol);
 }
 if(q.includes('suggest')) return 'Suggestion: Trade only trending stocks with volume confirmation.';
 return 'Type: price TCS or price INFY to get live NSE rates.';
}

async function send(){
 const input=document.getElementById('input');
 if(!input.value) return;
 const text=input.value;
 add(text,'user');
 input.value='';
 add('Checking market...','bot');
 const reply=await botReply(text);
 chat.lastChild.innerText=reply;
}

function toggleMenu(){
 document.getElementById('sidebar').classList.toggle('active');
}

function showFollow(){
 document.getElementById('follow').style.display='block';
}

setTimeout(()=>document.getElementById('ad').classList.add('show'),2500);
function closeAd(){document.getElementById('ad').classList.remove('show');}
</script>
</body>
</html>
